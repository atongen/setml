(jbuild_version 1)

(library
 ((name lib)
  (modules (
    db
    clients
    crypto
    pubsub
    route
    session
    templates
    util))
  (libraries (
    caqti
    caqti-driver-postgresql
    caqti-lwt
    cohttp
    cohttp-lwt
    cohttp-lwt-unix
    containers
    containers.thread
    cow
    nocrypto
    nocrypto.unix
    postgresql
    shared
    str
    websocket
    websocket.lwt
    websocket-lwt.cohttp
    yojson))))

(executable
 ((name setml)
  (public_name setml)
  (modules (
    setml
    file_server))
  (libraries (
    lib
    lwt
    websocket
    websocket.lwt
    websocket-lwt.cohttp))
  (package setml)))

(executable
  ((name test)
   (public_name test)
   (modules (test))
   (libraries (
     lib
     shared
     oUnit))
   (package setml)))

(alias
 ((name runtest)
  (deps (test.exe))
  (action (run ${<}))))
